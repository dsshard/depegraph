(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{1352:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(7876),l=s(9099),r=s(4232),n=s(5960);function i(e){return{sourceId:"string"==typeof e.source?e.source:e.source.id,targetId:"string"==typeof e.target?e.target:e.target.id}}let d=e=>{if(e.isRoot){let t=Math.log(Math.max(e.size||1024,1024)),s=Math.log(1024);return 30+20*Math.min((t-s)/(Math.log(0x3200000)-s),1)}if(1===e.dependencyLevel){let t=Math.log(Math.max(e.size||1024,1024)),s=Math.log(1024);return 4+26*Math.min((t-s)/(Math.log(0xa00000)-s),1)}{let t=e.size||0;if(0===t)return 4;let s=Math.log(1024);return 4+16*Math.min((Math.log(Math.max(t,1024))-s)/(Math.log(0xa00000)-s),1)}},o=e=>{switch(e.dependencyLevel){case 0:return"#ffb500";case 1:return"#27ae60";case 2:return"#e74c3c";default:return"#95a5a6"}},c=e=>e.isRoot?"#ffcd5e":1===e.dependencyLevel?"#24ff4c":2===e.dependencyLevel?"#e77b6f":e.isInstalled?"#9ba4b4":"#dc2626",h=e=>e.isRoot?3:e.isInstalled?1:2,x=e=>{switch(e.type){case"devDependency":return"#f39c12";case"peerDependency":return"#9b59b6";case"optionalDependency":return"#1abc9c";default:return"#7f8c8d"}},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;if(e.length<=t)return e;let s=e.replace(/^@[^/]+\//,"");return s.length<=t?s:s.substring(0,t-1)+"…"},p=(0,r.memo)(function(e){let[t,s]=(0,r.useState)([800,600]),{filteredNodes:l,filteredLinks:p,workspaces:m,setHoveredNode:f}=e,g=(0,r.useRef)(null),y=(0,r.useRef)(null),v=(0,r.useRef)(null),b=(0,r.useCallback)(()=>{if(!g.current)return;let{width:e,height:t}=g.current.getBoundingClientRect();e&&t&&s([e,t])},[]);(0,r.useEffect)(()=>(b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)),[b]);let j=(0,r.useCallback)((e,t)=>{let s=new Set;s.add(e),t.forEach(t=>{let{sourceId:a,targetId:l}=i(t);l===e&&s.add(a)});let a=(e,l)=>{t.forEach(t=>{let{sourceId:r,targetId:n}=i(t);r!==e||l.has(n)||(s.add(n),l.add(n),a(n,l))})},l=new Set([e]);return a(e,l),s},[]);return(0,r.useEffect)(()=>{if(!y.current||0===l.length)return;let[e,s]=t,a=n.Ltv(y.current).style("width","100%").style("height","100%");a.selectAll("*").remove(),a.attr("viewBox","0 0 ".concat(e," ").concat(s));let r=a.append("g"),g=n.s_O().scaleExtent([.1,5]).on("zoom",e=>{r.attr("transform",e.transform)});a.call(g);let b=new Map;l.forEach(e=>{var t;let s=e.workspaceId||"default";b.has(s)||b.set(s,[]),null==(t=b.get(s))||t.push(e)});let w=new Map,N=Array.from(b.keys()),k=Math.max(1,Math.ceil(Math.sqrt(N.length))),L=Math.ceil(N.length/k),R=(e-k)/2+.5,M=(s-L)/2+.5;N.forEach((e,t)=>{let s=Math.floor(t/k);w.set(e,{x:R+t%k*1,y:M+ +s,width:.1,height:.1})});let S=r.append("g").attr("class","workspaces"),E=()=>{if(0===m.length)return;let e=S.selectAll(".workspace-area").data(m,e=>e.name);e.exit().remove(),e.enter().append("g").attr("class","workspace-area").merge(e).select(".workspace-label").attr("x",e=>{let t=w.get(e.name);return t?t.x:0}).attr("y",e=>{let t=w.get(e.name);return t?t.y-t.height/2+20:0}).text(e=>e.name)},z=r.append("g").selectAll("line").style("z-index",-1).data(p).join("line").attr("stroke",x).attr("stroke-opacity",.4).attr("stroke-width",1.5),C=r.append("g"),B=C.selectAll(".node-hover-area").data(l).join("circle").style("z-index",10).attr("class","node-hover-area").attr("r",e=>d(e)+3).attr("fill","transparent").attr("stroke","none").style("cursor","pointer"),I=C.selectAll(".node-visual").data(l).join("circle").attr("class","node-visual").attr("r",d).attr("fill",o).attr("stroke",c).attr("stroke-width",h).style("pointer-events","none");B.on("mouseenter",(e,t)=>{f(t),I.filter(e=>e.id===t.id).transition().duration(200).attr("r",1.5*d(t));let s=j(t.id,p);z.transition().duration(200).attr("stroke-opacity",e=>{let{sourceId:t,targetId:a}=i(e);return s.has(t)&&s.has(a)?1:.1}).attr("stroke-width",e=>{let{sourceId:t,targetId:a}=i(e);return s.has(t)&&s.has(a)?3:1.5}),I.transition().duration(200).attr("opacity",e=>s.has(e.id)?1:.3)}).on("mouseleave",(e,t)=>{f(null),I.filter(e=>e.id===t.id).transition().duration(200).attr("r",d(t)),z.transition().duration(200).attr("stroke-opacity",.4).attr("stroke-width",1.5),I.transition().duration(200).attr("opacity",1)});let A=r.append("g").selectAll("g").data(l.filter(e=>e.isRoot||e.dependencyLevel<=2)).join("g").attr("class","label-group");A.append("text").attr("class","label-text").style("z-index",0).text(e=>u(e.name,e.isRoot?20:12)).attr("fill","#fff").attr("font-size",e=>e.isRoot?12:9).attr("font-weight",e=>e.isRoot?"bold":"normal").attr("pointer-events","none").attr("text-anchor","middle").attr("dominant-baseline","middle"),A.insert("rect",".label-text").attr("class","label-bg").attr("pointer-events","none").attr("fill","rgba(0, 0, 0, 0.8)").attr("rx",4).attr("ry",4),B.on("mouseenter.expand",(e,t)=>{let s=A.filter(e=>e.id===t.id),a=s.select(".label-text"),l=s.select(".label-bg");if(!a.empty()){let e=u(t.name,t.isRoot?20:12),n=t.name;if(e!==n){s.style("z-index",1e3);let e=s.node(),i=s.node();if(e&&"parentNode"in e&&i){var r;null==(r=e.parentNode)||r.appendChild(i)}a.text(n),setTimeout(()=>{try{let e=null==a?void 0:a.node();if(!e)return;let t=e.getBBox();l.transition().duration(200).attr("x",t.x-4).attr("y",t.y-2).attr("width",t.width+8).attr("height",t.height+4)}catch(a){let e=n.length*(t.isRoot?12:9)*.6,s=(t.isRoot?12:9)+2;l.transition().duration(200).attr("x",-e/2-4).attr("y",-s/2-2).attr("width",e+8).attr("height",s+4)}},10)}}}).on("mouseleave.expand",(e,t)=>{let s=A.filter(e=>e.id===t.id),a=s.select(".label-text"),l=s.select(".label-bg");if(!a.empty()){let e=u(t.name,t.isRoot?20:12);e!==t.name&&(s.style("z-index",null),a.text(e),setTimeout(()=>{try{let e=null==a?void 0:a.node();if(!e)return;let t=e.getBBox();l.transition().duration(200).attr("x",t.x-4).attr("y",t.y-2).attr("width",t.width+8).attr("height",t.height+4)}catch(r){let s=e.length*(t.isRoot?12:9)*.6,a=(t.isRoot?12:9)+2;l.transition().duration(200).attr("x",-s/2-4).attr("y",-a/2-2).attr("width",s+8).attr("height",a+4)}},10))}});let D=r.append("g").selectAll("g").data(l.filter(e=>!e.isRoot&&e.dependencyLevel>2)).join("g").attr("class","hover-label-group");D.append("rect").attr("class","hover-label-bg").attr("fill","rgba(0, 0, 0, 0.9)").attr("rx",3).attr("ry",3).style("opacity",0).attr("pointer-events","none"),D.append("text").attr("class","hover-label-text").text(e=>e.name).attr("fill","#fff").attr("font-size",e=>Math.max(8,11-e.dependencyLevel)).attr("pointer-events","none").attr("text-anchor","middle").attr("dominant-baseline","middle").style("opacity",0),B.on("mouseenter.label",(e,t)=>{if(!t.isRoot&&t.dependencyLevel>2){let e=D.filter(e=>e.id===t.id),a=e.node();if(a&&"parentNode"in a){var s;null==(s=a.parentNode)||s.appendChild(e.node())}e.select(".hover-label-bg").transition().duration(200).ease(n.gHU).style("opacity",1),e.select(".hover-label-text").transition().duration(200).ease(n.gHU).style("opacity",1)}}).on("mouseleave.label",(e,t)=>{if(!t.isRoot&&t.dependencyLevel>2){let e=D.filter(e=>e.id===t.id);e.select(".hover-label-bg").transition().duration(150).ease(n.$Sq).style("opacity",0),e.select(".hover-label-text").transition().duration(150).ease(n.$Sq).style("opacity",0)}});let P=n.$Er().on("start",(e,t)=>{v.current&&.1>v.current.alpha()&&v.current.alpha(.1).restart(),t.fx=t.x,t.fy=t.y}).on("drag",(e,t)=>{t.fx=e.x,t.fy=e.y}).on("end",(e,t)=>{!e.active&&v.current&&v.current.alphaTarget(0),t.fx=null,t.fy=null});B.call(P);let T=new Map;l.forEach(e=>{T.set(e.id,e.workspaceId||"default")});let _=new Map,F=new Map(l.map(e=>[e.id,e]));l.forEach(e=>{(0===e.dependencyLevel||e.isRoot)&&_.set(e.id,e.id)});let q=[...l.filter(e=>e.isRoot||0===e.dependencyLevel)],H=new Set(q.map(e=>e.id));for(;q.length>0;){let e=q.shift(),t=_.get(null==e?void 0:e.id);p.forEach(s=>{let{sourceId:a,targetId:l}=i(s);if(a===(null==e?void 0:e.id)&&!H.has(l)){_.set(l,t),H.add(l);let e=F.get(l);e&&q.push(e)}})}let O=n.tXi(l).alpha(1).velocityDecay(.1).force("link",n.kJC(p).id(e=>e.id).distance(()=>200).strength(1)).force("charge",n.xJS().strength(e=>e.isRoot?-900:0===e.dependencyLevel?-700:1===e.dependencyLevel?-500:-100)).force("collide",n.eRw().radius(e=>d(e)+3).strength(.9)).force("rootCenterX",n.KS8(t=>{if(t.isRoot||0===t.dependencyLevel){let s=t.workspaceId||"default",a=w.get(s);return a?a.x:e/4}return t.x||0}).strength(e=>e.isRoot||0===e.dependencyLevel?.8:0)).force("rootCenterY",n.TSS(e=>{if(e.isRoot||0===e.dependencyLevel){let t=e.workspaceId||"default",a=w.get(t);return a?a.y:s/4}return e.y||0}).strength(e=>.8*!!e.isRoot)).force("workspaceBounds",n.KS8(t=>{let s=t.workspaceId||"default",a=w.get(s);return a?a.x:e/2}).strength(e=>e.isRoot?.2:.02)).force("workspaceBoundsY",n.TSS(e=>{let t=e.workspaceId||"default",a=w.get(t);return a?a.y:s/2}).strength(e=>e.isRoot?.2:.02));return O.on("tick",()=>{z.attr("x1",e=>e.source.x||0).attr("y1",e=>e.source.y||0).attr("x2",e=>e.target.x||0).attr("y2",e=>e.target.y||0),B.attr("cx",e=>e.x||0).attr("cy",e=>e.y||0),I.attr("cx",e=>e.x||0).attr("cy",e=>e.y||0),A.attr("transform",e=>"translate(".concat(e.x||0,", ").concat((e.y||0)+d(e)+15,")")),D.attr("transform",e=>"translate(".concat(e.x||0,", ").concat((e.y||0)-d(e)-20,")")),E()}),setTimeout(()=>{A.each(function(e){let t=n.Ltv(this).select(".label-text").node();t&&setTimeout(()=>{try{let e=t.getBBox();n.Ltv(this).select(".label-bg").attr("x",e.x-4).attr("y",e.y-2).attr("width",e.width+8).attr("height",e.height+4)}catch(r){let t=e.name.length,s=e.isRoot?12:9,a=t*s*.6,l=s+2;n.Ltv(this).select(".label-bg").attr("x",-a/2-4).attr("y",-l/2-2).attr("width",a+8).attr("height",l+4)}},0)}),D.each(function(e){let t=n.Ltv(this).select(".hover-label-text").node();t&&setTimeout(()=>{try{let e=t.getBBox();n.Ltv(this).select(".hover-label-bg").attr("x",e.x-4).attr("y",e.y-2).attr("width",e.width+8).attr("height",e.height+4)}catch(a){let t=e.name.length*Math.max(8,11-e.dependencyLevel)*.6,s=Math.max(8,11-e.dependencyLevel)+2;n.Ltv(this).select(".hover-label-bg").attr("x",-t/2-4).attr("y",-s/2-2).attr("width",t+8).attr("height",s+4)}},0)})},100),E(),v.current=O,()=>{v.current&&v.current.stop()}},[l,p,m,t]),(0,a.jsx)("div",{ref:g,className:"w-full h-full",children:(0,a.jsx)("svg",{ref:y,className:"border-0 rounded-none"})})});function m(e){let{nodes:t,links:s,workspaces:l=[]}=e,[n,d]=(0,r.useState)(""),[o,c]=(0,r.useState)(t),[h,x]=(0,r.useState)(!1),[u,m]=(0,r.useState)(s),[f,g]=(0,r.useState)(null),y=(0,r.useMemo)(()=>{let e=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;return a.has(t)||(a.add(t),s.forEach(s=>{let{sourceId:l,targetId:r}=i(s);l!==t||a.has(r)||e(r,a)})),a};return s=>{let a=e(s),l=0;a.forEach(e=>{let s=t.find(t=>t.id===e);(null==s?void 0:s.formattedSize)&&(l+=(e=>{if(!e)return 0;let t=e.toLowerCase(),s=parseFloat(t);return t.includes("kb")?1024*s:t.includes("mb")?1024*s*1024:t.includes("gb")?1024*s*1048576:t.includes("b")?s:0})(s.formattedSize))});var r=l;if(0===r)return"0 B";let n=Math.floor(Math.log(r)/Math.log(1024));return parseFloat((r/1024**n).toFixed(1))+" "+["B","KB","MB","GB"][n]}},[t,s]);return(0,r.useEffect)(()=>{if(n.trim()){let e=new Set,a=t.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()));a.forEach(t=>e.add(t.id));let l=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;a<=0||s.forEach(s=>{s.source!==t||e.has(s.target)||(e.add(s.target),l(s.target,a-1))})},r=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;a<=0||s.forEach(s=>{s.target!==t||e.has(s.source)||(e.add(s.source),r(s.source,a-1))})},d=s=>{s.parentPath&&s.parentPath.length>0&&s.parentPath.forEach(s=>{let a=t.find(e=>e.name===s);a&&(e.add(a.id),d(a))})};a.forEach(s=>{l(s.id,5),r(s.id,5),d(s),t.forEach(t=>{var a;(null==(a=t.parentPath)?void 0:a.includes(s.name))&&e.add(t.id)})});let o=t.filter(t=>e.has(t.id)),h=s.filter(t=>{let{sourceId:s,targetId:a}=i(t);return e.has(s)&&e.has(a)});c(o),m(h)}else c(t),m(s)},[n,t,s]),(0,a.jsxs)("div",{className:"relative w-full h-full",children:[(0,a.jsxs)("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search...",value:n,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white shadow-sm"}),(0,a.jsxs)("button",{type:"button",onClick:()=>x(!h),className:"px-3 py-2 bg-gray-600 text-white rounded-lg text-sm hover:bg-gray-700 transition-colors shadow-sm flex items-center gap-2",title:h?"Hide legend":"Show legend",children:[(0,a.jsx)(e=>{let{isOpen:t}=e;return(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,a.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]})})},{isOpen:h}),h?"Show":"Legend"]}),n.trim()&&(0,a.jsxs)("div",{className:"text-xs text-gray-600 bg-white px-2 py-1 rounded shadow",children:["Showed: ",o.length," from ",t.length," pkgs"]})]}),(0,a.jsx)(p,{filteredLinks:u,filteredNodes:o,nodes:t,workspaces:l,setHoveredNode:g}),f&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-black/80 backdrop-blur-md border border-gray-200/10 p-4 rounded-lg shadow-lg max-w-sm pointer-events-none",children:[(0,a.jsx)("h3",{className:"font-bold text-lg text-white/70 mb-2",children:f.name}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[f.version&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Version:"}),(0,a.jsx)("span",{className:"font-mono text-blue-600",children:f.version})]}),f.formattedSize&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Size:"}),(0,a.jsx)("span",{className:"font-semibold text-purple-600",children:f.formattedSize})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total size:"}),(0,a.jsx)("span",{className:"font-semibold text-pink-600",children:y(f.id)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Level:"}),(0,a.jsx)("span",{className:"font-semibold ".concat(0===f.dependencyLevel?"text-slate-700":1===f.dependencyLevel?"text-green-600":2===f.dependencyLevel?"text-red-600":"text-gray-500"),children:0===f.dependencyLevel?"Root":1===f.dependencyLevel?"Direct":2===f.dependencyLevel?"Secondary":"Level ".concat(f.dependencyLevel)})]}),f.workspaceId&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Workspace:"}),(0,a.jsx)("span",{className:"font-mono text-indigo-600 text-xs",children:f.workspaceId})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Installed:"}),(0,a.jsx)("span",{className:"font-semibold ".concat(f.isInstalled?"text-green-600":"text-red-600"),children:f.isInstalled?"✓ Yes":"✗ No"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Deps:"}),(0,a.jsx)("span",{className:"font-semibold text-blue-600",children:f.depCount})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Used:"}),(0,a.jsx)("span",{className:"font-semibold text-orange-600",children:f.inDegree})]})]})]}),h&&(0,a.jsxs)("div",{className:"absolute bottom-4 right-4 bg-black/50 border border-gray-200/10 backdrop-blur-md p-4 rounded-lg shadow-lg text-white/50",children:[(0,a.jsx)("h4",{className:"font-bold mb-3 text-white",children:"Legend"}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold mb-2 text-white",children:"Level deps:"}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-slate-800 rounded-full mr-3 flex-shrink-0"}),(0,a.jsx)("span",{className:"",children:"Root pkgs"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-green-500 rounded-full mr-3 flex-shrink-0"}),(0,a.jsx)("span",{className:"",children:"Direct deps"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-full mr-3 flex-shrink-0"}),(0,a.jsx)("span",{className:"",children:"Second deps"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gray-400 rounded-full mr-3 flex-shrink-0"}),(0,a.jsx)("span",{className:"",children:"Deep deps"})]})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200/10 pt-2",children:[(0,a.jsx)("p",{className:"font-semibold mb-2 text-white",children:"Status:"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-gray-500 rounded-full border-2 border-red-600 mr-3 flex-shrink-0"}),(0,a.jsx)("span",{className:"",children:"Not installed"})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200/10 pt-2",children:[(0,a.jsx)("p",{className:"font-semibold mb-2 text-white",children:"Types of dependencies:"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-0.5 bg-gray-500 mr-3"}),(0,a.jsx)("span",{className:"text-xs",children:"dependencies"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-0.5 bg-orange-500 mr-3"}),(0,a.jsx)("span",{className:"text-xs",children:"devDependencies"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-0.5 bg-purple-500 mr-3"}),(0,a.jsx)("span",{className:"text-xs",children:"peerDependencies"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-0.5 bg-teal-500 mr-3"}),(0,a.jsx)("span",{className:"text-xs",children:"optionalDependencies"})]})]})]})]})]})]})}function f(){var e;let t=(0,l.useRouter)(),[s,n]=(0,r.useState)(""),[i,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),[h,x]=(0,r.useState)(null),u=(0,r.useCallback)(async e=>{let t=e||s;if(!t.trim())return void c("Please enter a project path");d(!0),c(null);try{let s=await fetch("/api/analyze?folder=".concat(t),{method:"POST"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to analyze project")}let a=await s.json();x(a),e&&n(e)}catch(e){c(e instanceof Error?e.message:"An error occurred")}finally{d(!1)}},[s]),p=(0,r.useCallback)(()=>{x(null),c(null),n(""),t.push("/")},[]);return(0,r.useEffect)(()=>{if(t.isReady){let{folder:e}=t.query;if(e&&"string"==typeof e){let t=decodeURIComponent(e);n(t),u(t)}}},[t.isReady,t.query]),(0,a.jsx)("div",{className:"min-h-screen bg-black",children:h?(0,a.jsxs)("div",{className:"fixed inset-0 bg-black flex flex-col",children:[(0,a.jsx)("div",{className:"flex-shrink-0 bg-black border-b border-white/10 px-4 py-3 text-white",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:p,className:"px-3 py-2 bg-gray-600  rounded-lg hover:bg-gray-700 transition-colors text-sm",children:"← New"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold whitespace-nowrap ",children:"Dependency Graph"}),(0,a.jsxs)("p",{className:"text-xs",children:[h.packages.length," pkgs, ",h.nodes.length," nodes, ",h.links.length," deps"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6 text-xs text-white/60",children:[(0,a.jsxs)("span",{children:["Workspaces: ",(null==(e=h.workspaces)?void 0:e.length)||0]}),(0,a.jsxs)("span",{children:["Root: ",h.nodes.filter(e=>e.isRoot).length]}),(0,a.jsxs)("span",{children:["Dependencies: ",h.nodes.filter(e=>!e.isRoot&&e.isInstalled).length]}),(0,a.jsxs)("span",{children:["Missing: ",h.nodes.filter(e=>!e.isInstalled).length]}),(0,a.jsxs)("span",{children:["Level 1: ",h.nodes.filter(e=>1===e.dependencyLevel).length]}),(0,a.jsxs)("span",{children:["Level 2: ",h.nodes.filter(e=>2===e.dependencyLevel).length]}),(0,a.jsxs)("span",{children:["Level 3: ",h.nodes.filter(e=>3===e.dependencyLevel).length]}),(0,a.jsxs)("span",{className:"text-gray-500",children:["Project: ",(0,a.jsx)("span",{className:"font-mono",children:s})]})]})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsx)(m,{nodes:h.nodes,links:h.links,workspaces:h.workspaces})})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"bg-white/10 rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white/80 mb-4",children:"Analyze Project"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"projectPath",className:"block text-sm font-medium text-white/20 mb-2",children:"Project Path"}),(0,a.jsx)("input",{type:"text",id:"projectPath",value:s,onChange:e=>n(e.target.value),placeholder:"/path/to/your/project",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",disabled:i}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the full path to your Node.js project or monorepo"})]}),(0,a.jsx)("button",{onClick:()=>u(),type:"button",disabled:i||!s.trim(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyzing..."]}):"Analyze Dependencies"})]})]}),o&&(0,a.jsx)("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Analysis Error"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-red-700",children:o})]})]})})]})})})})}},6760:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(1352)}])}},e=>{e.O(0,[130,636,593,792],()=>e(e.s=6760)),_N_E=e.O()}]);